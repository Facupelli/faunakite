---
import Footer from "../../components/footer.astro";
import Nav from "../../components/nav.astro";
import Layout from "../../layouts/Layout.astro";
import CuestaDelVientoLocation from "../../components/svg/cuesta-del-viento-location.astro";
import TheSpotTopSeparator from "../../components/svg/the-spot-top-separator.astro";
import AboutUsUnderSeparator from "../../components/svg/about-us-under-separator.astro";
import { Icon } from "astro-icon/components";
import { useTranslations } from "../../i18n/utils";
import TheSpot1Photo from "../../assets/the-spot/the-spot-1.webp";
import TheSpot2Photo from "../../assets/the-spot/the-spot-2.webp";
import TheSpot3Photo from "../../assets/the-spot/the-spot-3.webp";
import TheSpot4Photo from "../../assets/the-spot/the-spot-4.webp";
import FlyingPhoto from "../../assets/the-spot/flying.webp";
import { Image } from "astro:assets";
import { getImage } from "astro:assets";
import headerImage from "../../assets/headers/header-3.webp";
import Spot1Photo from "../../assets/the-spot/spot-1.webp";
import Spot2Photo from "../../assets/the-spot/spot-2.webp";
import Spot3Photo from "../../assets/the-spot/spot-3.webp";
import Spot4Photo from "../../assets/the-spot/spot-4.webp";
import Spot5Photo from "../../assets/the-spot/spot-5.webp";
import Spot6Photo from "../../assets/the-spot/spot-6.webp";
import Spot7Photo from "../../assets/the-spot/spot-7.webp";
import Spot8Photo from "../../assets/the-spot/spot-8.webp";
import Spot9Photo from "../../assets/the-spot/spot-9.webp";
import Spot10Photo from "../../assets/the-spot/spot-10.webp";
import Spot11Photo from "../../assets/the-spot/spot-11.webp";
import Spot12Photo from "../../assets/the-spot/spot-12.webp";
import Spot13Photo from "../../assets/the-spot/spot-13.webp";
import Spot14Photo from "../../assets/the-spot/spot-14.webp";
import Spot15Photo from "../../assets/the-spot/spot-15.webp";
import { KitetripsCarousel } from "../../components/spot/spot-carousel";
import MasonryGallery from "../../components/spot/masonry.astro";

export async function getStaticPaths() {
  return [{ params: { locale: "en" } }, { params: { locale: "es" } }];
}

const verticalImages = [
  {
    src: Spot1Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot2Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot3Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot4Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot5Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot6Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot7Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot8Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot9Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot11Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot15Photo,
    alt: "Cuesta del Viento",
  },
];

const horizontalImages = [
  {
    src: Spot12Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot10Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot13Photo,
    alt: "Cuesta del Viento",
  },
  {
    src: Spot14Photo,
    alt: "Cuesta del Viento",
  },
];

const optimizedVertical = await Promise.all(
  verticalImages.map(async (img) => {
    const desktop = await getImage({
      src: img.src,
      width: 1080,
      height: 1920,
      format: "webp",
      quality: 85,
    });
    const mobile = await getImage({
      src: img.src,
      width: 450,
      height: 800,
      format: "webp",
      quality: 85,
    });
    return {
      alt: img.alt,
      srcDesktop: desktop.src,
      srcMobile: mobile.src,
      width: 1080,
      height: 1920,
    };
  }),
);

const optimizedHorizontal = await Promise.all(
  horizontalImages.map(async (img) => {
    const desktop = await getImage({
      src: img.src,
      width: 1920,
      height: 1080,
      format: "webp",
      quality: 85,
    });
    const mobile = await getImage({
      src: img.src,
      width: 800,
      height: 450,
      format: "webp",
      quality: 85,
    });
    return {
      alt: img.alt,
      srcDesktop: desktop.src,
      srcMobile: mobile.src,
      width: 1920,
      height: 1080,
    };
  }),
);

const lang = Astro.params.locale as "en" | "es";
const t = useTranslations(lang);

const moreThanKiteItems = [
  {
    title: t("the-spot.more-than-kite.item1.title"),
    description: t("the-spot.more-than-kite.item1.description"),
    image:
      "https://trayectoriasenviaje.com/wp-content/uploads/2019/10/Rodeo_san_juan-40.jpg",
  },
  {
    title: t("the-spot.more-than-kite.item2.title"),
    description: t("the-spot.more-than-kite.item2.description"),
    image:
      "https://sanjuan.tur.ar/media/k2/galleries/49/cabalgata-barreal1.jpg",
  },
  {
    title: t("the-spot.more-than-kite.item3.title"),
    description: t("the-spot.more-than-kite.item3.description"),
    image:
      "https://discoveryseakayak.com/wp-content/uploads/2025/06/dsk_kayaking_group.jpg",
  },
  {
    title: t("the-spot.more-than-kite.item4.title"),
    description: t("the-spot.more-than-kite.item4.description"),
    image:
      "https://centrosantafe.com.mx/cdn/shop/articles/los-5-mejores-restaurantes-de-carne.jpg?v=1559341579",
  },
  {
    title: t("the-spot.more-than-kite.item5.title"),
    description: t("the-spot.more-than-kite.item5.description"),
    image:
      "https://media.tiempodesanjuan.com/p/a1b0ca7efe90d236b720a97743e2699d/adjuntos/331/imagenes/000/761/0000761315/790x0/smart/imagepng.png",
  },
  {
    title: t("the-spot.more-than-kite.item6.title"),
    description: t("the-spot.more-than-kite.item6.description"),
    image:
      "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2b/2d/9e/e3/pampa-bar.jpg?w=1000&h=-1&s=1",
  },
];
---

<Layout title="Cuesta del Viento | Fauna Kite " locale={Astro.params.locale}>
  <Fragment slot="head">
    <meta name="description" content={t("the-spot.meta.description")} />
    <link
      rel="canonical"
      href={`https://faunakite.com/${Astro.params.locale}/cuesta-del-viento`}
    />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="FAUNA Kite" />
    <meta property="og:title" content="Cuesta del Viento | FAUNA Kite" />
    <meta property="og:description" content={t("the-spot.meta.description")} />
    <meta
      property="og:url"
      content={`https://faunakite.com/${Astro.params.locale}/cuesta-del-viento`}
    />
    <meta
      property="og:image"
      content="https://faunakite.com/og/fauna-cuesta-del-viento.jpg"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Cuesta del Viento | FAUNA Kite" />
    <meta name="twitter:description" content={t("the-spot.meta.description")} />
    <meta
      name="twitter:image"
      content="https://faunakite.com/og/fauna-cuesta-del-viento.jpg"
    />
  </Fragment>

  <header>
    <Nav />
  </header>

  <main class="min-h-dvh bg-brand-light">
    <div class="relative w-full h-[220px] md:h-[300px]">
      <div class="absolute inset-0">
        <Image
          src={headerImage}
          alt="Header background"
          fetchpriority="high"
          class="w-full h-full object-cover object-[80%_55%]"
          widths={[640, 768, 1024, 1280, 1536]}
          sizes="100vw"
          quality={92}
        />
      </div>

      <div
        class="flex justify-center max-w-4xl mx-auto relative z-20 h-full items-end pb-4 md:pb-10"
      >
        <h1
          class="font-salted text-shadow-2xs text-shadow-brand-blue text-5xl md:text-8xl pr-4 md:pr-0"
        >
          Cuesta Del Viento
        </h1>
      </div>

      <div class="absolute bottom-0 left-0 w-full text-brand-blue">
        <TheSpotTopSeparator />
      </div>
    </div>

    <div class="bg-brand-blue">
      <div class="max-w-6xl mx-auto py-20">
        <div class="space-y-8 text-white text-lg md:text-xl px-4">
          <p>
            {t("the-spot.intro.p1")}
          </p>
        </div>
      </div>
    </div>

    <section class="relative bg-brand-light">
      <div
        class="relative bg-brand-light bg-[url('/cuesta-del-viento/white-wave-contrast-2.png')] bg-size-[42px_auto]"
      >
        <div
          class="relative z-20 text-brand-blue drop-shadow-xs drop-shadow-brand-blue"
        >
          <AboutUsUnderSeparator />
        </div>

        <div class="pt-10 px-4 md:px-0">
          <div class="max-w-7xl mx-auto">
            <p
              class="text-brand-blue font-bold uppercase text-4xl md:text-6xl pb-10"
            >
              {t("the-spot.impression.title")}
            </p>

            <div class="grid md:grid-cols-3 gap-4 relative">
              <div class="col-span-1 text-brand-blue">
                <p class="space-y-4 text-lg">
                  <span class="block">{t("the-spot.impression.p1")}</span>
                  <span class="block">{t("the-spot.impression.p2")}</span>
                  <span class="block">{t("the-spot.impression.p3")}</span>
                </p>
              </div>

              <div
                class="hidden md:block rounded-2xl group overflow-hidden absolute top-0 bottom-0 left-[calc(33.333%+0.5rem)] right-0"
              >
                <Image
                  src={TheSpot1Photo}
                  alt="Practicando windsurf en las aguas del Dique Cuesta del Viento"
                  class="rounded-2xl object-cover w-full h-full transition-transform duration-700 ease-out group-hover:scale-110"
                  loading="lazy"
                />
              </div>
            </div>

            <div class="pt-4 md:px-0">
              <MasonryGallery
                verticalImages={optimizedVertical}
                horizontalImages={optimizedHorizontal}
              />
            </div>
          </div>

          <!-- DONDE SIEMPRE SOPLA -->
          <div class="max-w-7xl mx-auto pt-20 md:pt-10">
            <div class="grid md:grid-cols-2 md:gap-x-10 gap-y-6">
              <div class="col-start-2 px-4">
                <!-- DONDE SIEMPRE SOPLA SVG -->
                <svg
                  class="w-full max-w-3xl mx-auto"
                  viewBox="290 530 500 120"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <defs>
                    <path id="arcDondeSiempreSopla" d="M101 631Q712 679 797 550"
                    ></path>
                  </defs>

                  <text
                    font-size="30"
                    fill="currentColor"
                    font-weight="600"
                    letter-spacing="3"
                  >
                    <textPath
                      href="#arcDondeSiempreSopla"
                      startOffset="50%"
                      text-anchor="middle"
                      class="font-salted text-brand-blue"
                    >
                      donde siempre sopla
                    </textPath>
                  </text>

                  <text
                    x="660"
                    y="500"
                    font-size="30"
                    fill="currentColor"
                    font-weight="600"
                    letter-spacing="3"
                    class="font-salted text-brand-blue"
                    transform="rotate(-70 740 570)"
                  >
                    a
                  </text>

                  <text
                    x="650"
                    y="600"
                    font-size="30"
                    fill="currentColor"
                    font-weight="600"
                    letter-spacing="3"
                    class="font-salted text-brand-blue"
                  >
                    a
                  </text>

                  <text
                    x="450"
                    y="400"
                    font-size="30"
                    fill="currentColor"
                    font-weight="600"
                    letter-spacing="3"
                    class="font-salted text-brand-blue"
                    transform="rotate(-40 800 170)"
                    opacity="0.85"
                  >
                    a
                  </text>
                </svg>
              </div>

              <div class="relative flex md:overflow-hidden">
                <div
                  class="absolute inset-0 w-full p-4 md:p-0 top-20 md:top-0 md:w-[70%] lg:w-[65%] opacity-20 md:opacity-100 z-0 h-full object-contain"
                >
                  <CuestaDelVientoLocation />
                </div>
              </div>

              <div
                class="space-y-6 text-lg max-w-prose relative z-10 text-brand-blue row-span-1 px-4"
              >
                <p>
                  {t("the-spot.wind.p1")}
                </p>

                <p>
                  {t("the-spot.wind.p2")}
                </p>

                <p>
                  {t("the-spot.wind.p3")}
                </p>

                <p>
                  {t("the-spot.wind.p4")}
                </p>

                <p>
                  {t("the-spot.wind.p5")}
                </p>
              </div>
            </div>
          </div>

          <!-- MAS QUE KITE -->
          <div class="pb-20 pt-20 md:pt-30 relative">
            <div
              id="mas-que-kite"
              class="max-w-7xl mx-auto text-brand-blue px-4"
            >
              <div
                class="flex flex-col gap-2 md:flex-row md:items-center justify-between"
              >
                <h2 class="text-brand-blue font-bold text-2xl md:text-4xl">
                  {t("the-spot.more-than-kite.title")}
                </h2>

                <a
                  class="border-2 border-brand-red text-center text-brand-red bg-transparent shadow-news-card hover:bg-white hover:text-brand-red hover:border-brand-red transition-colors duration-200 cursor-pointer text-base px-6 py-2 font-bold rounded-3xl"
                  href={`/${lang}/benefits`}
                >
                  {t("the-spot.more-than-kite.cta")}
                </a>
              </div>

              <ul
                class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-6 overflow-hidden md:overflow-visible pt-10 relative"
              >
                {
                  moreThanKiteItems.map((item) => (
                    <li class="flex flex-col items-center relative">
                      <div class="h-[230px] w-full rounded-2xl shadow-news-card">
                        <img
                          src={item.image}
                          alt="Dique Cuesta del Viento"
                          class="rounded-2xl object-cover w-full h-full filter-bluish-dark"
                        />
                      </div>
                      <div class="py-4 space-y-1 text-brand-blue">
                        <p class="font-bold text-brand-red">{item.title}</p>
                        <p class="text-sm md:text-base ">{item.description}</p>
                      </div>
                    </li>
                  ))
                }
              </ul>

              <!-- <div class="pt-10 flex justify-center max-w-7xl mx-auto">
              <a
                class="bg-brand-red hover:bg-white hover:text-brand-red border hover:border-brand-red transition-colors duration-200 cursor-pointer text-white text-base px-6 py-2 font-bold rounded-2xl"
                href={`/${lang}/benefits`}
              >
                {t("the-spot.more-than-kite.cta")}
              </a>
            </div> -->
            </div>
          </div>
        </div>

        <div class="relative w-full h-[70dvh] md:h-dvh">
          <div class="absolute inset-0">
            <Image
              src={FlyingPhoto}
              alt="Vista aÃ©rea del Dique Cuesta del Viento - lugar perfecto para kitesurf"
              class="h-full object-cover w-full object-[65%_30%] md:object-[50%_30%]"
              loading="lazy"
            />
          </div>

          <div class="absolute left-0 bottom-0 w-full text-celeste-3 z-20">
            <TheSpotTopSeparator />
          </div>
        </div>

        <!-- COMO LLEGAR -->
        <div id="mas-que-kite-como-llegar" class="pb-10">
          <div class="bg-celeste-3 py-20">
            <div class="md:text-center px-4 md:px-0 text-white spae-y-2">
              <h2 class="font-bold text-4xl md:text-6xl pb-2">
                {t("the-spot.how-to-get.title")}
              </h2>
              <p>
                {t("the-spot.how-to-get.intro")}
              </p>
            </div>

            <div class="py-10 max-w-7xl mx-auto">
              <div class="grid md:grid-cols-5 gap-x-10 px-4">
                <div class="md:col-span-2 space-y-4 text-white">
                  <div class="space-y-2">
                    <h3 class="font-bold text-lg">
                      {t("the-spot.how-to-get.sanjuan.title")}
                    </h3>
                    <p>
                      {t("the-spot.how-to-get.sanjuan.text")}
                    </p>
                  </div>

                  <div class="space-y-2">
                    <h3 class="font-bold text-lg">
                      {t("the-spot.how-to-get.mendoza.title")}
                    </h3>
                    <p>
                      {t("the-spot.how-to-get.mendoza.text")}
                    </p>
                  </div>

                  <div class="space-y-2">
                    <h3 class="font-bold text-lg">
                      {t("the-spot.how-to-get.cordoba.title")}
                    </h3>
                    <p>
                      {t("the-spot.how-to-get.cordoba.text")}
                    </p>
                  </div>

                  <div class="space-y-2">
                    <h3 class="font-bold text-lg">
                      {t("the-spot.how-to-get.buenos-aires.title")}
                    </h3>
                    <p>
                      {t("the-spot.how-to-get.buenos-aires.text")}
                    </p>
                  </div>
                </div>

                <div class="md:col-span-3 pt-10 md:pt-0">
                  <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d54467.75347765515!2d-69.1173416182144!3d-30.18664593872637!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9684bb8638777e6d%3A0x44246635a8420f27!2sFauna%20Kite!5e0!3m2!1ses-419!2sar!4v1766591363583!5m2!1ses-419!2sar"
                    width="100%"
                    height="450"
                    class="border-none rounded-md"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
              </div>
            </div>
          </div>

          <div class="text-celeste-3">
            <AboutUsUnderSeparator />
          </div>
        </div>

        <div class="max-w-7xl mx-auto pb-20 px-4">
          <div class="text-brand-blue text-4xl uppercase font-bold pb-20">
            <p>{t("the-spot.tips.title")}</p>
          </div>

          <div
            id="como-llegar"
            class="grid md:grid-cols-3 max-w-2xl md:max-w-full text-brand-blue text-lg md:gap-20 gap-10 px-4 md:px-0"
          >
            <div class="space-y-8">
              <div class="flex justify-center">
                <Icon name="combi" class="size-32 text-brand-blue" />
              </div>
              <p class="">
                {t("the-spot.tips.carpool.text")}
                <a
                  class="underline whatsapp-btn"
                  target="_blank"
                  rel="noopener noreferrer"
                  >{t("the-spot.tips.carpool.link")}
                </a>
                {t("the-spot.tips.carpool.suffix")}
              </p>
            </div>

            <div class="space-y-8">
              <div class="flex justify-center">
                <Icon name="cabana" class="w-36 h-32 text-brand-blue" />
              </div>
              <p class="">
                {t("the-spot.tips.mobility")}
              </p>
            </div>

            <div class="space-y-8">
              <div class="flex justify-center">
                <Icon name="mochila" class="size-28 text-brand-blue" />
              </div>
              <p class="">
                {t("the-spot.tips.things-to-bring")}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <Footer />
  </main>

  <script>
    import { initializeWhatsAppButton } from "../../modules/utils/whatsapp";

    document.addEventListener("astro:page-load", () => {
      initializeWhatsAppButton(".whatsapp-btn", "");
    });
  </script>
</Layout>
