---
import { useTranslations } from "../../../i18n/utils";
import ServicesLayout from "../../../layouts/services-layout.astro";
import { KitetripsCarousel } from "../../../components/spot/spot-carousel";
import Sicily1Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-1.webp";
import Sicily2Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-2.webp";
import Sicily3Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-3.webp";
import Sicily4Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-4.webp";
import Sicily5Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-5.webp";
import Sicily6Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-6.webp";
import Sicily7Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-7.webp";
import Sicily8Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-8.webp";
import Sicily9Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-9.webp";
import Sicily11Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-11.webp";
import Sicily12Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-12.webp";
import Sicily13Photo from "../../../assets/what-we-offer/kitetrips/lo-stagnone-13.webp";
import SicilyPhoto from "../../../assets/what-we-offer/kitetrips/sicily-kite.webp";
import { getImage } from "astro:assets";

export async function getStaticPaths() {
  return [{ params: { locale: "en" } }, { params: { locale: "es" } }];
}

const lang = Astro.params.locale as "en" | "es";
const t = useTranslations(lang);

const carouselImages = [
  {
    src: Sicily2Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily1Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily3Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily4Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily5Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily6Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily7Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily8Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily9Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily11Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily12Photo,
    alt: "Lo Stagnone, Sicilia",
  },
  {
    src: Sicily13Photo,
    alt: "Lo Stagnone, Sicilia",
  },
];

const optimizedImages = await Promise.all(
  carouselImages.map(async (image) => {
    const optimizedDesktop = await getImage({
      src: image.src,
      width: 1920,
      height: 1080, // 16:9 aspect ratio
      format: "webp",
      quality: 85,
    });

    const optimizedMobile = await getImage({
      src: image.src,
      width: 800,
      height: 450, // 16:9 aspect ratio
      format: "webp",
      quality: 85,
    });

    return {
      alt: image.alt,
      srcDesktop: optimizedDesktop.src,
      srcMobile: optimizedMobile.src,
      width: 1920,
      height: 1080,
    };
  }),
);

const activities = [
  {
    image: SicilyPhoto.src,

    title: "Kite",
    description:
      "Navegá aguas planas con viento constante en una de las mejores lagunas del Mediterráneo.",
  },
  {
    image:
      "https://images.unsplash.com/photo-1670667105463-5b29d841cfe9?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
    title: "Playas",
    description:
      "Playas de arena clara, mar turquesa y atardeceres que parecen pintados.",
  },
  {
    image:
      "https://images.unsplash.com/photo-1662197480393-2a82030b7b83?q=80&w=988&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
    title: "Pasta",
    description:
      "Cocina siciliana auténtica: pastas caseras, sabores intensos y tradición en cada plato.",
  },
  {
    image:
      "https://images.unsplash.com/photo-1650553448920-9432f8086905?q=80&w=987&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
    title: "Helado",
    description:
      "Gelato artesanal italiano, cremoso y fresco, perfecto después de un día al sol.",
  },
];
---

<ServicesLayout>
  <Fragment slot="header">
    <div class="max-w-6xl mx-auto pb-30">
      <div class="space-y-8 text-lg md:text-xl px-4">
        <p>
          {t("services.kitetrips.header.p1")}
        </p>
        <p>
          {t("services.kitetrips.header.p2")}
        </p>
        <p>
          {t("services.kitetrips.header.p3")}
        </p>
      </div>
    </div>
  </Fragment>

  <div>
    <div class="flex flex-col md:flex-row gap-10 max-w-7xl mx-auto pt-10 px-4">
      <div class="md:basis-[33%]">
        <h2 class="font-salted text-5xl md:text-6xl text-brand-red">
          {t("services.kitetrips.destination.title")}
        </h2>
      </div>
      <div class="md:basis-[66%]">
        <div class="text-brand-blue max-w-7xl mx-auto text-lg space-y-4">
          <p>
            {t("services.kitetrips.destination.p1")}
          </p>
          <p>
            {t("services.kitetrips.destination.p2")}
          </p>
          <p>
            {t("services.kitetrips.destination.p3")}
          </p>
          <p>
            {t("services.kitetrips.destination.p4")}
          </p>
        </div>

        <div class="pt-6 flex justify-end">
          <a
            target="_blank"
            rel="noopener noreferrer"
            class="whatsapp-btn bg-brand-red hover:bg-white hover:text-brand-red border hover:border-brand-red transition-colors duration-200 cursor-pointer text-white text-base px-6 py-3 font-bold rounded-2xl"
          >
            {t("services.kitetrips.cta.travel")}
          </a>
        </div>
      </div>
    </div>

    <div class="flex items-center gap-10 max-w-7xl mx-auto">
      <div class="basis-3/5">
        <div class="max-w-7xl mx-auto py-10 md:py-20 h-[350px] md:h-[800px]">
          <KitetripsCarousel client:load images={optimizedImages} />
        </div>
      </div>

      <div class="basis-2/5">
        <div class="space-y-8 text-brand-blue pt-20 pb-10 px-4">
          <h2
            class="text-4xl md:text-[90px] text-center text-pretty font-salted leading-tight"
          >
            {t("services.kitetrips.experiences.title")}
          </h2>
          <p
            class="text-center text-lg text-brand-blue/80 max-w-2xl mx-auto text-pretty"
          >
            {t("services.kitetrips.experiences.subtitle")}
          </p>
        </div>
      </div>
    </div>

    <div
      class="flex flex-wrap items-center justify-center gap-10 py-10 md:py-20"
    >
      {
        activities.map((activity, index) => (
          <div class="shadow-news-card rounded-2xl w-[300px] text-brand-blue">
            <div>
              <img
                src={activity.image}
                alt="Kitesurf, Sicilia"
                class={`object-cover size-[300px] rounded-t-2xl ${index === 0 && "object-[50%_90%]"}`}
              />
            </div>
            <div class="p-8 bg-white rounded-b-2xl space-y-4">
              <p class="text-lg font-bold">{activity.title}</p>
              <p>{activity.description}</p>
            </div>
          </div>
        ))
      }
    </div>

    <div class="flex flex-col md:flex-row gap-10 max-w-7xl mx-auto pt-10 px-4">
      <div class="md:basis-[20%]">
        <h2 class="font-salted text-5xl md:text-6xl text-brand-red">
          {t("services.kitetrips.fauna.title")}
        </h2>
      </div>
      <div class="md:basis-[80%] text-brand-blue text-lg">
        <p class="pb-4 font-bold">
          {t("services.kitetrips.fauna.intro")}
        </p>
        <ul
          class="grid md:grid-cols-2 items-start gap-x-6 list-disc list-inside"
        >
          <li class="py-2 rounded-2xl">
            {t("services.kitetrips.fauna.item1")}
          </li>
          <li class="py-2 rounded-2xl">
            {t("services.kitetrips.fauna.item2")}
          </li>
          <li class="py-2 rounded-2xl">
            {t("services.kitetrips.fauna.item3")}
          </li>
          <li class="py-2 rounded-2xl">
            {t("services.kitetrips.fauna.item4")}
          </li>
        </ul>

        <div class="pt-10 flex justify-start max-w-7xl mx-auto">
          <a
            target="_blank"
            rel="noopener noreferrer"
            class="whatsapp-btn-2 bg-brand-red hover:bg-white hover:text-brand-red border hover:border-brand-red transition-colors duration-200 cursor-pointer text-white text-base px-6 py-3 font-bold rounded-2xl"
          >
            {t("services.kitetrips.cta.travel")}
          </a>
        </div>
      </div>
    </div>
  </div>
</ServicesLayout>

<script>
  import { initializeWhatsAppButton } from "../../../modules/utils/whatsapp";

  document.addEventListener("astro:page-load", () => {
    initializeWhatsAppButton(".whatsapp-btn", "");
    initializeWhatsAppButton(".whatsapp-btn-2", "");
  });
</script>
