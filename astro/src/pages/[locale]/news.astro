---
import { Image } from "astro:assets";
import Layout from "../../layouts/Layout.astro";
import { formatDate } from "../../modules/news/date.utils";
import { getNews, type News } from "../../modules/news/utils";
import logo from "../../assets/logos/logo-blanco-03.png";

export async function getStaticPaths() {
  return [{ params: { locale: "en" } }, { params: { locale: "es" } }];
}

const lang = Astro.params.locale as "en" | "es";
const posts: News[] = await getNews();
---

<Layout title="Noticias | Fauna Kite ">
  <main class="min-h-dvh bg-brand-blue">
    <div class="mx-auto max-w-2xl px-5 py-12">
      <div class="py-10">
        <div class="flex justify-center">
          <div
            class="relative w-full max-w-[150px] aspect-[3.45/1] flex items-center justify-center"
          >
            <Image decoding="async" src={logo} alt="Logo FaunaKite white" />
          </div>
        </div>
      </div>

      <div class="relative -top-2.5 flex flex-col gap-8">
        {
          posts.map((post) => (
            <a
              href={`/${lang}/news/${post.slug.current}`}
              class="block cursor-pointer py-4 hover:scale-[1.005] will-change-transform scale-100 active:scale-100 transition-all duration-150"
            >
              <article>
                <h2 class="text-[28px] font-black leading-none mb-2">
                  {post.title}
                </h2>
                <p class="text-[13px] text-gray-700 dark:text-gray-300">
                  {formatDate(post._createdAt)}
                </p>
                <p class="mt-1">{post.summary}</p>
              </article>
            </a>
          ))
        }
      </div>
    </div>
  </main>
</Layout>
