---
import type { News } from "../modules/news/utils";
import { urlFor } from "../modules/news/image.utils";
import { formatDate } from "../modules/news/date.utils";

const lang = Astro.params.locale as "en" | "es";

interface Props {
  post: News;
  aside?: boolean;
}

const { post, aside } = Astro.props;

const titleClass = aside
  ? "pt-2 text-xl font-bold"
  : "pt-2 text-2xl md:text-3xl font-bold";

const articleClass = aside ? "bg-white" : "bg-white";

console.log({ lang });
---

<article
  class={`${articleClass} w-full h-full text-brand-blue rounded-2xl overflow-hidden shadow-news-card group cursor-pointer`}
>
  {
    post.image ? (
      <div class="relative h-40 overflow-hidden">
        <img
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
          src={urlFor(post.image).width(500).height(300).url()}
          loading="lazy"
          alt={post.image.alt || ""}
        />
      </div>
    ) : (
      <div class="w-full h-[231px] bg-black" />
    )
  }
  <div class="p-4">
    <p class="text-sm text-gray-600">
      {formatDate(post._createdAt)}
    </p>

    <h3 class={titleClass}>
      <a href={`/post/${post.slug.current}`}>
        {post.title}
      </a>
    </h3>
    <p class="text-gray-400 text-pretty text-base leading-5">{post.summary}</p>

    <div class="pt-4">
      <a
        class="text-brand-red hover:underline"
        href={`/${lang}/news/${post.slug.current}`}>Ver m√°s</a
      >
    </div>
  </div>
</article>
