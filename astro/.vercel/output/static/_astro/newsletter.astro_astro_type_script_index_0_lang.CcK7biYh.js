import{i as S}from"./client.B9YBqyHK.js";function w(e){const t=D(e),a=new ArrayBuffer(t.length),r=new DataView(a);for(let s=0;s<a.byteLength;s++)r.setUint8(s,t.charCodeAt(s));return a}const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function D(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",a=0,r=0;for(let s=0;s<e.length;s++)a<<=6,a|=b.indexOf(e[s]),r+=6,r===24&&(t+=String.fromCharCode((a&16711680)>>16),t+=String.fromCharCode((a&65280)>>8),t+=String.fromCharCode(a&255),a=r=0);return r===12?(a>>=4,t+=String.fromCharCode(a)):r===18&&(a>>=2,t+=String.fromCharCode((a&65280)>>8),t+=String.fromCharCode(a&255)),t}const C=-1,L=-2,U=-3,P=-4,k=-5,v=-6;function B(e,t){return F(JSON.parse(e),t)}function F(e,t){if(typeof e=="number")return s(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const a=e,r=Array(a.length);function s(o,u=!1){if(o===C)return;if(o===U)return NaN;if(o===P)return 1/0;if(o===k)return-1/0;if(o===v)return-0;if(u||typeof o!="number")throw new Error("Invalid input");if(o in r)return r[o];const n=a[o];if(!n||typeof n!="object")r[o]=n;else if(Array.isArray(n))if(typeof n[0]=="string"){const i=n[0],l=t?.[i];if(l)return r[o]=l(s(n[1]));switch(i){case"Date":r[o]=new Date(n[1]);break;case"Set":const f=new Set;r[o]=f;for(let c=1;c<n.length;c+=1)f.add(s(n[c]));break;case"Map":const I=new Map;r[o]=I;for(let c=1;c<n.length;c+=2)I.set(s(n[c]),s(n[c+1]));break;case"RegExp":r[o]=new RegExp(n[1],n[2]);break;case"Object":r[o]=Object(n[1]);break;case"BigInt":r[o]=BigInt(n[1]);break;case"null":const g=Object.create(null);r[o]=g;for(let c=1;c<n.length;c+=2)g[n[c]]=s(n[c+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const c=globalThis[i],A=new c(s(n[1]));r[o]=n[2]!==void 0?A.subarray(n[2],n[3]):A;break}case"ArrayBuffer":{const c=n[1],A=w(c);r[o]=A;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const c=i.slice(9);r[o]=Temporal[c].from(n[1]);break}case"URL":{const c=new URL(n[1]);r[o]=c;break}case"URLSearchParams":{const c=new URLSearchParams(n[1]);r[o]=c;break}default:throw new Error(`Unknown type ${i}`)}}else{const i=new Array(n.length);r[o]=i;for(let l=0;l<n.length;l+=1){const f=n[l];f!==L&&(i[l]=s(f))}}else{const i={};r[o]=i;for(const l in n){if(l==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const f=n[l];i[l]=s(f)}}return r[o]}return s(0)}function M(e){return e.endsWith("/")?e:e+"/"}const m={actionName:"_action"},j=m,G=M,N={BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,CONTENT_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,MISDIRECTED_REQUEST:421,UNPROCESSABLE_CONTENT:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NETWORK_AUTHENTICATION_REQUIRED:511},Q=Object.entries(N).reduce((e,[t,a])=>({...e,[a]:t}),{});class E extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(t){super(t.message),this.code=t.code,this.status=E.codeToStatus(t.code),t.stack&&(this.stack=t.stack)}static codeToStatus(t){return N[t]}static statusToCode(t){return Q[t]??"INTERNAL_SERVER_ERROR"}static fromJson(t){return V(t)?new H(t.issues):Y(t)?new E(t):new E({code:"INTERNAL_SERVER_ERROR"})}}function Y(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionError"}function V(e){return typeof e=="object"&&e!=null&&"type"in e&&e.type==="AstroActionInputError"&&"issues"in e&&Array.isArray(e.issues)}class H extends E{type="AstroActionInputError";issues;fields;constructor(t){super({message:`Failed to validate: ${JSON.stringify(t,null,2)}`,code:"BAD_REQUEST"}),this.issues=t,this.fields={};for(const a of t)if(a.path.length>0){const r=a.path[0].toString();this.fields[r]??=[],this.fields[r]?.push(a.message)}}}function h(e){return`?${new URLSearchParams({[m.actionName]:e}).toString()}`}function R(e){if(e.type==="error"){let t;try{t=JSON.parse(e.body)}catch{return{data:void 0,error:new E({message:e.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:E.fromJson(t),data:void 0}}return e.type==="empty"?{data:void 0,error:void 0}:{data:B(e.body,{URL:t=>new URL(t)}),error:void 0}}const $="%2E";function _(e={},t=""){return new Proxy(e,{get(a,r){if(a.hasOwnProperty(r)||typeof r=="symbol")return a[r];const s=t+encodeURIComponent(r.toString()).replaceAll(".",$);function o(u){return O(u,s)}return Object.assign(o,{queryString:h(s),toString:()=>o.queryString,bind:o.bind,valueOf:()=>o.valueOf,$$FORM_ACTION:function(){return{method:"POST",name:"_astroAction",action:"?"+new URLSearchParams(o.toString()).toString()}},async orThrow(u){const{data:n,error:i}=await O(u,s);if(i)throw i;return n}}),_(o,s+".")}})}function J(e){let t=`${"/".replace(/\/$/,"")}/_actions/${new URLSearchParams(e()).get(j.actionName)}`;return t=G(t),t}async function O(e,t,a){const r=new Headers;r.set("Accept","application/json");for(const[n,i]of Object.entries(S))r.set(n,i);let s=e;if(!(s instanceof FormData)){try{s=JSON.stringify(e)}catch(n){throw new E({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${n.message}`})}s?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const o=await fetch(J(()=>h(t)),{method:"POST",body:s,headers:r});if(o.status===204)return R({type:"empty",status:204});const u=await o.text();return o.ok?R({type:"data",body:u,status:200,contentType:"application/json+devalue"}):R({type:"error",body:u,status:o.status,contentType:"application/json"})}const q=_(),d=document.getElementById("newsletter-form"),T=document.getElementById("newsletter-dialog"),y=document.getElementById("dialog-icon"),W=document.getElementById("dialog-title"),X=document.getElementById("dialog-message"),x=document.getElementById("dialog-close");function p(e,t,a){e?(y.className="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-green-100",y.innerHTML=`
        <svg class="w-6 h-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
        </svg>
      `):(y.className="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-red-100",y.innerHTML=`
        <svg class="w-6 h-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      `),W.textContent=t,X.textContent=a,T.showModal()}d.addEventListener("submit",async e=>{e.preventDefault();const t=d.querySelector('button[type="submit"]');d.querySelector('input[name="email"]'),t.disabled=!0,t.textContent="Sending...";try{const a=new FormData(d),{data:r,error:s}=await q.newsletter.subscribe(a);s?p(!1,"La suscripción falló",s.message||"Error al suscribir. Por favor, inténtelo de nuevo."):(p(!0,"¡Suscripción exitosa!",r?.message||"¡Gracias por suscribirte a nuestro boletín."),d.reset())}catch{p(!1,"La suscripción falló","Ha ocurrido un error inesperado. Por favor, inténtelo de nuevo más tarde.")}finally{t.disabled=!1,t.textContent="Send"}});x.addEventListener("click",()=>{T.close()});T.addEventListener("click",e=>{const t=T.getBoundingClientRect();(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)&&T.close()});
